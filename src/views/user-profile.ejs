<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Perfil - <%= profile.name %>
      <%= profile.last_name %>
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/css/home.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="d-flex flex-column min-vh-100 bg-light">

  <!-- HEADER -->
  <header class="navbar navbar-light bg-white border-bottom shadow-sm px-4 py-2">
    <div class="container-fluid">
      <a href="/home" class="navbar-brand fw-bold fs-4">Artesanos</a>
      <a href="/home" class="btn btn-outline-secondary">Volver</a>
    </div>
  </header>

  <!-- CONTENIDO -->
  <main class="flex-grow-1 container mt-4">

    <!-- Tarjeta de perfil -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body d-flex align-items-center">
        <div class="me-3">
          <% if (profile.image_profile) { %>
            <img src="<%= profile.image_profile %>" alt="Perfil" class="rounded-circle border"
              style="width: 200px; height: 200px; object-fit: cover;">
            <% } else { %>
              <div class="rounded-circle bg-secondary d-inline-flex justify-content-center align-items-center"
                style="width: 200px; height: 200px;">
                <i class="bi bi-person text-white fs-1"></i>
              </div>
              <% } %>
        </div>
        <div>
          <h4 class="mb-1">
            <%= profile.name %>
              <%= profile.last_name %>
          </h4>
          <p class="mb-0 text-muted"><i class="bi bi-envelope"></i>
            <%= profile.email %>
          </p>
          <p class="mb-0 text-muted"><i class="bi bi-person-circle"></i> <strong>@<%= profile.username %></strong></p>
          <form action="/users/<%= profile.id %>/request-friend" method="POST">
            <button class="btn btn-success mb-4" type="submit">
              <i class="bi bi-person-plus"></i> Enviar solicitud de amistad
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Álbumes del usuario -->
    <h4 class="mb-3">Álbumes de <%= profile.name %>
    </h4>

    <% if (albums && albums.length> 0) { %>
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 mb-4">
        <% albums.forEach(function(album) { %>
          <div class="col">
            <div class="card h-100 shadow-sm">
              <% if (album.front_page) { %>
                <img src="<%= album.front_page %>" class="card-img-top" alt="Portada"
                  style="object-fit: cover; height: 180px;">
                <% } else { %>
                  <div class="bg-secondary text-white d-flex align-items-center justify-content-center"
                    style="height: 180px;">
                    <i class="bi bi-image fs-1"></i>
                  </div>
                  <% } %>
                    <div class="card-body">
                      <h5 class="card-title">
                        <%= album.title %>
                      </h5>
                      <% if (album.description) { %>
                        <p class="card-text text-muted">
                          <%= album.description %>
                        </p>
                        <% } %>
                    </div>
            </div>
          </div>
          <% }); %>
      </div>
      <% } else { %>
        <p class="text-muted">Este usuario aún no tiene álbumes.</p>
        <% } %>
  </main>

  <footer class="bg-white border-top py-3 mt-auto text-center">
    <!-- Pie de página -->
  </footer>

  <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

</html>